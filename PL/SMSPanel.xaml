<Window x:Class="Heyam.SMSPanel"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:hc="https://handyorg.github.io/handycontrol"      
        xmlns:local="clr-namespace:Heyam"
        mc:Ignorable="d"
        ResizeMode="NoResize"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"    
        Title="SMSPanel" Height="670" Width="900" FontFamily="pack://application:,,,/Resources/Fonts/#IRANSansWeb(FaNum)" FlowDirection="RightToLeft">
    <Border x:Name="border" BorderThickness="3" CornerRadius="5">
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#292556" Offset="0.0"/>
                <GradientStop Color="#1C1C1C" Offset="1.0"/>
            </LinearGradientBrush>
        </Border.BorderBrush>
        <Border.Effect>
            <DropShadowEffect BlurRadius="7" ShadowDepth="1" Color="#31426A"/>
        </Border.Effect>
        <Grid Margin="10">
            <Grid x:Name="MainGrid">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="285"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <!-- ارسال تکی -->
                <GroupBox x:Name="SinglePanelGB" Visibility="Visible" Header="ارسال پیامک تکی" Margin="0,0,0,10" Background="#d8e2dc">
                    <StackPanel Orientation="Vertical" Margin="35">
                        <TextBlock x:Name="SingleSendSelectPhoneNumberText" Text="انتخاب موکل:" FontWeight="Bold" IsHitTestVisible="False" HorizontalAlignment="Center" Margin="8,-30,0,10" TextWrapping="Wrap" Width="110" Height="18"/>
                        <ComboBox x:Name="SingleSendSelectClientCB" IsEditable="True" Width="210" SelectionChanged="SingleSendSelectClientCB_SelectionChanged"/>
                        <TextBlock x:Name="SingleSendShowClientNameText" Text="" FontWeight="Bold" IsHitTestVisible="False" HorizontalAlignment="Right" Margin="0,-32,15,0" TextWrapping="Wrap" Width="220" Height="18"/>
                        <TextBox x:Name="SingleMessageTB" Height="80" TextWrapping="Wrap" BorderBrush="Gray"
                         AcceptsReturn="True" VerticalContentAlignment="Top" Margin="0 5 0 5" TextChanged="SingleMessageTextBox_TextChanged"/>
                        <TextBlock x:Name="SingleSendMessagePlaceholderText" Text="متن پیام خود را بنویسید ..." IsHitTestVisible="False" Foreground="Gray" HorizontalAlignment="Left" Margin="8,-145,0,0" TextWrapping="Wrap" Width="145" Height="18"/>
                        <Button x:Name="SingleSendSmsBTN" Content="📤 ارسال پیامک" Cursor="Hand" Background="Gold" BorderBrush="Gray" Width="130" Height="30" Click="SingleSendSmsBTN_Click"/>
                    </StackPanel>
                </GroupBox>

                <!-- ارسال گروهی -->
                <GroupBox x:Name="GroupPanelGP" Header="ارسال پیامک گروهی" Background="#edf2f4" Grid.Row="1" Margin="0,0,0,6">
                    <DockPanel Margin="5,0,0,0">
                        <StackPanel Width="300" DockPanel.Dock="Left">
                            <hc:SearchBar x:Name="GroupSearchBox" Visibility="Visible" Width="250" HorizontalAlignment="Left"
                                                  Margin="0 0 0 5"
                                                  TextChanged="GroupSearchBox_TextChanged"/>
                            <TextBlock x:Name="GroupSendSearchPlaceholderText" Text="جستجو براساس نام موکل یا تلفن همراه" IsHitTestVisible="False" Foreground="Gray" HorizontalAlignment="Left" Margin="8,-40,0,0" TextWrapping="Wrap" Width="200" Height="18"/>
                                <StackPanel>
                                    <!-- ✅ تیک زدن همه -->
                                    <CheckBox x:Name="SelectAllCheckBox" Content="انتخاب همه" Margin="5"
                                    Checked="SelectAllCheckBox_Checked" Unchecked="SelectAllCheckBox_Unchecked" />

                                    <!-- ✅ لیست موکل‌ها -->
                                    <!-- لیست موکل‌ها درون Border -->
                                    <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="5" Margin="5"
                                    Background="#FFF" Height="145">
                                        <ScrollViewer>
                                            <ItemsControl x:Name="GroupClientCheckList">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <StackPanel Orientation="Vertical"/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" Margin="5">
                                                            <CheckBox Content="{Binding ClientName}" 
                                                            IsChecked="{Binding IsSelected, Mode=TwoWay}" Width="150"/>
                                                            <TextBlock Text="{Binding PhoneNumber}" Margin="10,0,0,0"/>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Border>
                                </StackPanel>
                        </StackPanel>

                        <StackPanel Height="190" Width="450">
                            <TextBox x:Name="GroupMessageTB" VerticalContentAlignment="Top" Height="110" TextWrapping="Wrap" BorderBrush="Gray"
                             Margin="0 30 0 0" AcceptsReturn="True" TextChanged="GroupMessageTB_TextChanged"/>
                            <TextBlock x:Name="GroupSendMessagePlaceholderText" Text="متن پیام خود را بنویسید ..." IsHitTestVisible="False" Foreground="Gray" HorizontalAlignment="Left" Margin="8,-187,0,0" TextWrapping="Wrap" Width="145" Height="20"/>

                            <Button x:Name="GroupSendSmsBTN" Content="📤 ارسال گروهی پیامک" Cursor="Hand" Background="Gold" BorderBrush="Gray" Width="160" Margin="0 10 0 0" Height="32" Click="GroupSendSmsBTN_Click" />
                        </StackPanel>
                    </DockPanel>
                </GroupBox>

                <DataGrid x:Name="SingleSMSDGV" AutoGenerateColumns="False" VerticalScrollBarVisibility="Auto" IsReadOnly="True" CanUserResizeColumns="True" Visibility="Collapsed" Grid.RowSpan="2">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="کاربر" Width="55">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding UserTypeText}" Foreground="{Binding UserTypeColor}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="نام موکل" Binding="{Binding ClientName}" Width="170"/>
                        <DataGridTextColumn Header="تلفن همراه" Binding="{Binding PhoneNumber}" Width="*"/>
                        <DataGridTextColumn Header="تاریخ ارسال" Binding="{Binding SetDateShamsi}" Width="90"/>
                        <DataGridTextColumn Header="شماره ارسال کننده" Binding="{Binding SenderLineNumber}" Width="130"/>
                        <DataGridTemplateColumn Header="وضعیت ارسال" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding StatusText}"
                                               Foreground="{Binding StatusColor}"
                                               FontWeight="Bold"
                                               HorizontalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- ستون دکمه نمایش جزئیات -->
                        <DataGridTemplateColumn Header="مشاهده جزئیات" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button x:Name="ShowSingleSMSDetailsBTN" Content="👁 مشاهده" 
                             Tag="{Binding Id}" Cursor="Hand" Click="ShowSingleSMSDetailsBTN_Click" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <DataGrid x:Name="GroupSMSDGV" AutoGenerateColumns="False" IsReadOnly="True" CanUserResizeColumns="True" Visibility="Collapsed" Grid.Row="1">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Header="کاربر" Width="55">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding UserTypeText}" Foreground="{Binding UserTypeColor}" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="نام موکل" Binding="{Binding ClientName}" Width="170"/>
                        <DataGridTextColumn Header="تلفن همراه" Binding="{Binding PhoneNumber}" Width="*"/>
                        <DataGridTextColumn Header="تاریخ ارسال" Binding="{Binding SetDateShamsi}" Width="90"/>
                        <DataGridTextColumn Header="شماره ارسال کننده" Binding="{Binding SenderLineNumber}" Width="130"/>
                        <DataGridTemplateColumn Header="وضعیت ارسال" Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding StatusText}"
                                               Foreground="{Binding StatusColor}"
                                               FontWeight="Bold"
                                               HorizontalAlignment="Center"/>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="شناسه ارسال" Binding="{Binding ShortGroupId}" Width="Auto"/>
                        <!-- ستون دکمه نمایش جزئیات -->
                        <DataGridTemplateColumn Header="مشاهده جزئیات" Width="120">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Button x:Name="ShowGroupSMSDetailsBTN" Content="👁 مشاهده" 
                                            Tag="{Binding Id}" Cursor="Hand" Click="ShowGroupSMSDetailsBTN_Click" />
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
            <!-- پاپ‌آپ و نمایش جزئیات -->
            <Grid x:Name="SingleSMSDetailsPopup" Visibility="Collapsed"
              HorizontalAlignment="Center" VerticalAlignment="Top"
              Height="240"
              Width="400">
                <Border Background="White" Padding="15" CornerRadius="10" BorderBrush="Black" BorderThickness="3" Width="400" Height="240">
                    <StackPanel>
                        <TextBlock Text="📜 متن پیام" FontSize="18" FontWeight="Bold" Foreground="DarkBlue" Margin="0,0,0,10"/>
                        <TextBox x:Name="SingleMessageTBPopup" IsReadOnly="True" VerticalContentAlignment="Top" VerticalScrollBarVisibility="Auto" Height="110" TextWrapping="Wrap" BorderBrush="Gray"
                             Margin="0 10 0 0" AcceptsReturn="True"/>
                        <WrapPanel HorizontalAlignment="Right" Margin="0,11,0,0" Width="100">
                            <Button x:Name="SingleMessageDetailsPopupCloseBTN" Content="❌ بستن" Background="#1259D5" Foreground="White" Cursor="Hand" Margin="25 0 0 0" Height="30" Click="SingleMessageDetailsPopupCloseBTN_Click"/>
                        </WrapPanel>
                    </StackPanel>
                </Border>
            </Grid>
            <Grid x:Name="GroupSMSDetailsPopup" Visibility="Collapsed"
                  HorizontalAlignment="Center" VerticalAlignment="Top"
                  Height="240"
                  Width="400">
                <Border Background="White" Padding="15" CornerRadius="10" BorderBrush="Black" BorderThickness="3" Width="400" Height="240">
                    <StackPanel>
                        <TextBlock Text="📜 متن پیام" FontSize="18" FontWeight="Bold" Foreground="DarkBlue" Margin="0,0,0,10"/>
                        <TextBox x:Name="GroupMessageTBPopup" IsReadOnly="True" VerticalContentAlignment="Top" VerticalScrollBarVisibility="Auto" Height="110" TextWrapping="Wrap" BorderBrush="Gray"
                                 Margin="0 10 0 0" AcceptsReturn="True"/>
                        <WrapPanel HorizontalAlignment="Right" Margin="0,11,0,0" Width="100">
                            <Button x:Name="GroupMessageDetailsPopupCloseBTN" Content="❌ بستن" Background="#1259D5" Foreground="White" Cursor="Hand" Margin="25 0 0 0" Height="30" Click="GroupMessageDetailsPopupCloseBTN_Click"/>
                        </WrapPanel>
                    </StackPanel>
                </Border>
            </Grid>
            <hc:SearchBar x:Name="SingleSearchBox" Width="250" HorizontalAlignment="Left" Visibility="Collapsed"
                          Margin="7,574,0,35" TextChanged="SingleSearchBox_TextChanged"/>
            <TextBlock x:Name="SingleSendSearchPlaceholderText" Visibility="Hidden" Text="جستجو براساس نام موکل یا تلفن همراه" IsHitTestVisible="False" Foreground="Gray" HorizontalAlignment="Left" Margin="15,582,0,44" TextWrapping="Wrap" Width="200" Height="18"/>
            <!-- نمایش وضعیت یا پیام‌ها -->
            <Button x:Name="ShowHide_SingleSMSListBTN" Content="نمایش/پنهان‌سازی لیست پیام های تکی" Height="35" Width="220" Background="#03A9F4" Foreground="White" HorizontalAlignment="Right" Margin="0,607,115,0" Cursor="Hand" Click="ShowHide_SingleSMSListBTN_Click" VerticalAlignment="Top"/>
            <Button x:Name="ShowHide_GroupSMSListBTN" Content="نمایش/پنهان‌سازی لیست پیام های گروهی" Height="35" Width="226" Background="#03A9F4" Foreground="White" HorizontalAlignment="Right" Margin="0,607,347,0" Cursor="Hand" Click="ShowHide_GroupSMSListBTN_Click" VerticalAlignment="Top"/>
            <Button x:Name="CloseBTN" Background="#1051E7" Foreground="White" Content="برگشت" Width="100" Height="31" Cursor="Hand" Click="CloseBTN_Click" HorizontalAlignment="Left" Margin="769,609,0,0" VerticalAlignment="Top"/>
        </Grid>
    </Border>
</Window>